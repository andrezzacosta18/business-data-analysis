from _typeshed import Incomplete
from mlflow.exceptions import MlflowException as MlflowException
from mlflow.protos.databricks_pb2 import INVALID_STATE as INVALID_STATE, RESOURCE_ALREADY_EXISTS as RESOURCE_ALREADY_EXISTS, RESOURCE_DOES_NOT_EXIST as RESOURCE_DOES_NOT_EXIST
from mlflow.server.auth.db.models import SqlExperimentPermission as SqlExperimentPermission, SqlRegisteredModelPermission as SqlRegisteredModelPermission, SqlUser as SqlUser
from mlflow.server.auth.entities import ExperimentPermission as ExperimentPermission, RegisteredModelPermission as RegisteredModelPermission, User as User
from mlflow.store.db.utils import create_sqlalchemy_engine_with_retry as create_sqlalchemy_engine_with_retry
from mlflow.utils.uri import extract_db_type_from_uri as extract_db_type_from_uri
from typing import List

class SqlAlchemyStore:
    db_uri: Incomplete
    db_type: Incomplete
    engine: Incomplete
    ManagedSessionMaker: Incomplete
    def init_db(self, db_uri) -> None: ...
    def authenticate_user(self, username: str, password: str) -> bool: ...
    def create_user(self, username: str, password: str, is_admin: bool = False) -> User: ...
    def has_user(self, username: str) -> bool: ...
    def get_user(self, username: str) -> User: ...
    def list_users(self) -> List[User]: ...
    def update_user(self, username: str, password: str = None, is_admin: bool = None) -> User: ...
    def delete_user(self, username: str): ...
    def create_experiment_permission(self, experiment_id: str, username: str, permission: str) -> ExperimentPermission: ...
    def get_experiment_permission(self, experiment_id: str, username: str) -> ExperimentPermission: ...
    def list_experiment_permissions(self, username: str) -> List[ExperimentPermission]: ...
    def update_experiment_permission(self, experiment_id: str, username: str, permission: str) -> ExperimentPermission: ...
    def delete_experiment_permission(self, experiment_id: str, username: str): ...
    def create_registered_model_permission(self, name: str, username: str, permission: str) -> RegisteredModelPermission: ...
    def get_registered_model_permission(self, name: str, username: str) -> RegisteredModelPermission: ...
    def list_registered_model_permissions(self, username: str) -> List[RegisteredModelPermission]: ...
    def update_registered_model_permission(self, name: str, username: str, permission: str) -> RegisteredModelPermission: ...
    def delete_registered_model_permission(self, name: str, username: str): ...
