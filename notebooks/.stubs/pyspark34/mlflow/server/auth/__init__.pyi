from _typeshed import Incomplete
from flask import Flask as Flask, Response as Response
from mlflow import MlflowException as MlflowException
from mlflow.entities import Experiment as Experiment
from mlflow.entities.model_registry import RegisteredModel as RegisteredModel
from mlflow.protos.databricks_pb2 import BAD_REQUEST as BAD_REQUEST, ErrorCode as ErrorCode, INVALID_PARAMETER_VALUE as INVALID_PARAMETER_VALUE, RESOURCE_DOES_NOT_EXIST as RESOURCE_DOES_NOT_EXIST
from mlflow.protos.model_registry_pb2 import CreateModelVersion as CreateModelVersion, CreateRegisteredModel as CreateRegisteredModel, DeleteModelVersion as DeleteModelVersion, DeleteModelVersionTag as DeleteModelVersionTag, DeleteRegisteredModel as DeleteRegisteredModel, DeleteRegisteredModelAlias as DeleteRegisteredModelAlias, DeleteRegisteredModelTag as DeleteRegisteredModelTag, GetLatestVersions as GetLatestVersions, GetModelVersion as GetModelVersion, GetModelVersionByAlias as GetModelVersionByAlias, GetModelVersionDownloadUri as GetModelVersionDownloadUri, GetRegisteredModel as GetRegisteredModel, RenameRegisteredModel as RenameRegisteredModel, SearchRegisteredModels as SearchRegisteredModels, SetModelVersionTag as SetModelVersionTag, SetRegisteredModelAlias as SetRegisteredModelAlias, SetRegisteredModelTag as SetRegisteredModelTag, TransitionModelVersionStage as TransitionModelVersionStage, UpdateModelVersion as UpdateModelVersion, UpdateRegisteredModel as UpdateRegisteredModel
from mlflow.protos.service_pb2 import CreateExperiment as CreateExperiment, CreateRun as CreateRun, DeleteExperiment as DeleteExperiment, DeleteRun as DeleteRun, DeleteTag as DeleteTag, GetExperiment as GetExperiment, GetExperimentByName as GetExperimentByName, GetMetricHistory as GetMetricHistory, GetRun as GetRun, ListArtifacts as ListArtifacts, LogBatch as LogBatch, LogMetric as LogMetric, LogModel as LogModel, LogParam as LogParam, RestoreExperiment as RestoreExperiment, RestoreRun as RestoreRun, SearchExperiments as SearchExperiments, SetExperimentTag as SetExperimentTag, SetTag as SetTag, UpdateExperiment as UpdateExperiment, UpdateRun as UpdateRun
from mlflow.server import app as app
from mlflow.server.auth.config import read_auth_config as read_auth_config
from mlflow.server.auth.logo import MLFLOW_LOGO as MLFLOW_LOGO
from mlflow.server.auth.permissions import MANAGE as MANAGE, Permission as Permission, get_permission as get_permission
from mlflow.server.auth.routes import CREATE_EXPERIMENT_PERMISSION as CREATE_EXPERIMENT_PERMISSION, CREATE_REGISTERED_MODEL_PERMISSION as CREATE_REGISTERED_MODEL_PERMISSION, CREATE_USER as CREATE_USER, DELETE_EXPERIMENT_PERMISSION as DELETE_EXPERIMENT_PERMISSION, DELETE_REGISTERED_MODEL_PERMISSION as DELETE_REGISTERED_MODEL_PERMISSION, DELETE_USER as DELETE_USER, GET_EXPERIMENT_PERMISSION as GET_EXPERIMENT_PERMISSION, GET_REGISTERED_MODEL_PERMISSION as GET_REGISTERED_MODEL_PERMISSION, GET_USER as GET_USER, HOME as HOME, SIGNUP as SIGNUP, UPDATE_EXPERIMENT_PERMISSION as UPDATE_EXPERIMENT_PERMISSION, UPDATE_REGISTERED_MODEL_PERMISSION as UPDATE_REGISTERED_MODEL_PERMISSION, UPDATE_USER_ADMIN as UPDATE_USER_ADMIN, UPDATE_USER_PASSWORD as UPDATE_USER_PASSWORD
from mlflow.server.auth.sqlalchemy_store import SqlAlchemyStore as SqlAlchemyStore
from mlflow.server.handlers import catch_mlflow_exception as catch_mlflow_exception, get_endpoints as get_endpoints
from mlflow.store.entities import PagedList as PagedList
from mlflow.utils.proto_json_utils import message_to_json as message_to_json, parse_dict as parse_dict
from mlflow.utils.search_utils import SearchUtils as SearchUtils

auth_config: Incomplete
store: Incomplete
UNPROTECTED_ROUTES: Incomplete

def is_unprotected_route(path: str) -> bool: ...
def make_basic_auth_response() -> Response: ...
def make_forbidden_response() -> Response: ...
def validate_can_read_experiment(): ...
def validate_can_read_experiment_by_name(): ...
def validate_can_update_experiment(): ...
def validate_can_delete_experiment(): ...
def validate_can_manage_experiment(): ...
def validate_can_read_experiment_artifact_proxy(): ...
def validate_can_update_experiment_artifact_proxy(): ...
def validate_can_read_run(): ...
def validate_can_update_run(): ...
def validate_can_delete_run(): ...
def validate_can_manage_run(): ...
def validate_can_read_registered_model(): ...
def validate_can_update_registered_model(): ...
def validate_can_delete_registered_model(): ...
def validate_can_manage_registered_model(): ...
def sender_is_admin():
    """Validate if the sender is admin"""
def username_is_sender():
    """Validate if the request username is the sender"""
def validate_can_read_user(): ...
def validate_can_update_user_password(): ...
def validate_can_update_user_admin(): ...
def validate_can_delete_user(): ...

BEFORE_REQUEST_HANDLERS: Incomplete

def get_before_request_handler(request_class): ...

BEFORE_REQUEST_VALIDATORS: Incomplete

def set_can_manage_experiment_permission(resp: Response): ...
def set_can_manage_registered_model_permission(resp: Response): ...
def filter_search_experiments(resp: Response): ...
def filter_search_registered_models(resp: Response): ...

AFTER_REQUEST_PATH_HANDLERS: Incomplete

def get_after_request_handler(request_class): ...

AFTER_REQUEST_HANDLERS: Incomplete

def create_admin_user(username, password) -> None: ...
def alert(href: str): ...
def signup(): ...
def create_user(): ...
def get_user(): ...
def update_user_password(): ...
def update_user_admin(): ...
def delete_user(): ...
def create_experiment_permission(): ...
def get_experiment_permission(): ...
def update_experiment_permission(): ...
def delete_experiment_permission(): ...
def create_registered_model_permission(): ...
def get_registered_model_permission(): ...
def update_registered_model_permission(): ...
def delete_registered_model_permission(): ...
def create_app(app: Flask = ...):
    """
    A factory to enable authentication and authorization for the MLflow server.

    :param app: The Flask app to enable authentication and authorization for.
    :return: The app with authentication and authorization enabled.
    """
