import abc
from . import AsyncContextManager as AsyncContextManager
from ... import CredentialUnavailableError as CredentialUnavailableError
from .get_token_mixin import GetTokenMixin as GetTokenMixin
from .managed_identity_client import AsyncManagedIdentityClient as AsyncManagedIdentityClient
from azure.core.credentials import AccessToken as AccessToken
from typing import Any

class AsyncManagedIdentityBase(AsyncContextManager, GetTokenMixin, metaclass=abc.ABCMeta):
    """Base class for internal credentials using AsyncManagedIdentityClient"""
    def __init__(self, **kwargs) -> None: ...
    @abc.abstractmethod
    def get_client(self, **kwargs) -> AsyncManagedIdentityClient | None: ...
    @abc.abstractmethod
    def get_unavailable_message(self) -> str: ...
    async def __aenter__(self): ...
    async def __aexit__(self, *args) -> None: ...
    async def close(self) -> None: ...
    async def get_token(self, *scopes: str, claims: str | None = None, tenant_id: str | None = None, **kwargs: Any) -> AccessToken: ...
