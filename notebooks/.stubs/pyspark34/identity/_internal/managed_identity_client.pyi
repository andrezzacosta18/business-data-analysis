import abc
from .._internal.pipeline import build_pipeline as build_pipeline
from azure.core.credentials import AccessToken
from azure.core.pipeline import PipelineResponse as PipelineResponse
from azure.core.pipeline.transport import HttpRequest as HttpRequest
from typing import Any, Callable, Dict

class ManagedIdentityClientBase(abc.ABC, metaclass=abc.ABCMeta):
    def __init__(self, request_factory: Callable[[str, dict], HttpRequest], client_id: str | None = None, identity_config: Dict | None = None, **kwargs: Any) -> None: ...
    def get_cached_token(self, *scopes: str) -> AccessToken | None: ...
    @abc.abstractmethod
    def request_token(self, *scopes, **kwargs): ...

class ManagedIdentityClient(ManagedIdentityClientBase):
    def __enter__(self): ...
    def __exit__(self, *args) -> None: ...
    def close(self) -> None: ...
    def request_token(self, *scopes: str, **kwargs: Any) -> AccessToken: ...
