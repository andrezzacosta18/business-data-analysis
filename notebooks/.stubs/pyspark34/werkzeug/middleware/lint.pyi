import typing as t
from ..datastructures import Headers as Headers
from ..http import is_entity_header as is_entity_header
from ..wsgi import FileWrapper as FileWrapper
from _typeshed import Incomplete
from _typeshed.wsgi import WSGIApplication as WSGIApplication, WSGIEnvironment as WSGIEnvironment
from types import TracebackType

class WSGIWarning(Warning):
    """Warning class for WSGI warnings."""
class HTTPWarning(Warning):
    """Warning class for HTTP warnings."""

def check_type(context: str, obj: object, need: t.Type = ...) -> None: ...

class InputStream:
    def __init__(self, stream: t.IO[bytes]) -> None: ...
    def read(self, *args: t.Any) -> bytes: ...
    def readline(self, *args: t.Any) -> bytes: ...
    def __iter__(self) -> t.Iterator[bytes]: ...
    def close(self) -> None: ...

class ErrorStream:
    def __init__(self, stream: t.IO[str]) -> None: ...
    def write(self, s: str) -> None: ...
    def flush(self) -> None: ...
    def writelines(self, seq: t.Iterable[str]) -> None: ...
    def close(self) -> None: ...

class GuardedWrite:
    def __init__(self, write: t.Callable[[bytes], object], chunks: list[int]) -> None: ...
    def __call__(self, s: bytes) -> None: ...

class GuardedIterator:
    closed: bool
    headers_set: Incomplete
    chunks: Incomplete
    def __init__(self, iterator: t.Iterable[bytes], headers_set: tuple[int, Headers], chunks: list[int]) -> None: ...
    def __iter__(self) -> GuardedIterator: ...
    def __next__(self) -> bytes: ...
    def close(self) -> None: ...
    def __del__(self) -> None: ...

class LintMiddleware:
    """Warns about common errors in the WSGI and HTTP behavior of the
    server and wrapped application. Some of the issues it checks are:

    -   invalid status codes
    -   non-bytes sent to the WSGI server
    -   strings returned from the WSGI application
    -   non-empty conditional responses
    -   unquoted etags
    -   relative URLs in the Location header
    -   unsafe calls to wsgi.input
    -   unclosed iterators

    Error information is emitted using the :mod:`warnings` module.

    :param app: The WSGI application to wrap.

    .. code-block:: python

        from werkzeug.middleware.lint import LintMiddleware
        app = LintMiddleware(app)
    """
    app: Incomplete
    def __init__(self, app: WSGIApplication) -> None: ...
    def check_environ(self, environ: WSGIEnvironment) -> None: ...
    def check_start_response(self, status: str, headers: list[tuple[str, str]], exc_info: None | tuple[type[BaseException], BaseException, TracebackType]) -> tuple[int, Headers]: ...
    def check_headers(self, headers: Headers) -> None: ...
    def check_iterator(self, app_iter: t.Iterable[bytes]) -> None: ...
    def __call__(self, *args: t.Any, **kwargs: t.Any) -> t.Iterable[bytes]: ...
