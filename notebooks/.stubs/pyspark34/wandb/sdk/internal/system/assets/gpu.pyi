import threading
from .aggregators import aggregate_mean as aggregate_mean
from .asset_registry import asset_registry as asset_registry
from .interfaces import Interface as Interface, Metric as Metric, MetricsMonitor as MetricsMonitor
from _typeshed import Incomplete
from typing import Deque, List
from wandb.sdk.internal.settings_static import SettingsStatic as SettingsStatic
from wandb.vendor.pynvml import pynvml as pynvml

GPUHandle = object
logger: Incomplete

def gpu_in_use_by_this_process(gpu_handle: GPUHandle, pid: int) -> bool: ...

class GPUMemoryUtilization:
    """GPU memory utilization in percent for each GPU."""
    name: str
    samples: Deque[List[float]]
    pid: Incomplete
    def __init__(self, pid: int) -> None: ...
    def sample(self) -> None: ...
    def clear(self) -> None: ...
    def aggregate(self) -> dict: ...

class GPUMemoryAllocated:
    """GPU memory allocated in percent for each GPU."""
    name: str
    samples: Deque[List[float]]
    pid: Incomplete
    def __init__(self, pid: int) -> None: ...
    def sample(self) -> None: ...
    def clear(self) -> None: ...
    def aggregate(self) -> dict: ...

class GPUMemoryAllocatedBytes:
    """GPU memory allocated in bytes for each GPU."""
    name: str
    samples: Deque[List[float]]
    pid: Incomplete
    def __init__(self, pid: int) -> None: ...
    def sample(self) -> None: ...
    def clear(self) -> None: ...
    def aggregate(self) -> dict: ...

class GPUUtilization:
    """GPU utilization in percent for each GPU."""
    name: str
    samples: Deque[List[float]]
    pid: Incomplete
    def __init__(self, pid: int) -> None: ...
    def sample(self) -> None: ...
    def clear(self) -> None: ...
    def aggregate(self) -> dict: ...

class GPUTemperature:
    """GPU temperature in Celsius for each GPU."""
    name: str
    samples: Deque[List[float]]
    pid: Incomplete
    def __init__(self, pid: int) -> None: ...
    def sample(self) -> None: ...
    def clear(self) -> None: ...
    def aggregate(self) -> dict: ...

class GPUPowerUsageWatts:
    """GPU power usage in Watts for each GPU."""
    name: str
    samples: Deque[List[float]]
    pid: Incomplete
    def __init__(self, pid: int) -> None: ...
    def sample(self) -> None: ...
    def clear(self) -> None: ...
    def aggregate(self) -> dict: ...

class GPUPowerUsagePercent:
    """GPU power usage in percent for each GPU."""
    name: str
    samples: Deque[List[float]]
    pid: Incomplete
    def __init__(self, pid: int) -> None: ...
    def sample(self) -> None: ...
    def clear(self) -> None: ...
    def aggregate(self) -> dict: ...

class GPU:
    name: Incomplete
    metrics: Incomplete
    metrics_monitor: Incomplete
    def __init__(self, interface: Interface, settings: SettingsStatic, shutdown_event: threading.Event) -> None: ...
    @classmethod
    def is_available(cls) -> bool: ...
    def start(self) -> None: ...
    def finish(self) -> None: ...
    def probe(self) -> dict: ...
