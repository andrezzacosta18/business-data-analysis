import abc
from . import summary_record as sr
from ..data_types.utils import history_dict_to_json as history_dict_to_json, val_to_json as val_to_json
from ..lib.mailbox import MailboxHandle as MailboxHandle
from ..wandb_run import Run as Run
from .message_future import MessageFuture as MessageFuture
from _typeshed import Incomplete
from typing import Any, Iterable, Tuple, TypedDict
from wandb.proto import wandb_internal_pb2 as pb
from wandb.sdk.artifacts.artifact import Artifact as Artifact
from wandb.sdk.artifacts.artifact_manifest import ArtifactManifest as ArtifactManifest
from wandb.util import WandBJSONEncoderOld as WandBJSONEncoderOld, get_h5_typename as get_h5_typename, json_dumps_safer as json_dumps_safer, json_dumps_safer_history as json_dumps_safer_history, json_friendly as json_friendly, json_friendly_val as json_friendly_val, maybe_compress_summary as maybe_compress_summary

GlobStr: Incomplete
PolicyName: Incomplete

class FilesDict(TypedDict):
    files: Iterable[Tuple[GlobStr, PolicyName]]

logger: Incomplete

def file_policy_to_enum(policy: PolicyName) -> pb.FilesItem.PolicyType.V: ...
def file_enum_to_policy(enum: pb.FilesItem.PolicyType.V) -> PolicyName: ...

class InterfaceBase(metaclass=abc.ABCMeta):
    def __init__(self) -> None: ...
    def publish_header(self) -> None: ...
    def communicate_status(self) -> pb.StatusResponse | None: ...
    def publish_run(self, run: Run) -> None: ...
    def publish_cancel(self, cancel_slot: str) -> None: ...
    def publish_config(self, data: dict | None = None, key: Tuple[str, ...] | str | None = None, val: Any | None = None) -> None: ...
    def publish_summary(self, summary_record: sr.SummaryRecord) -> None: ...
    def publish_files(self, files_dict: FilesDict) -> None: ...
    def publish_link_artifact(self, run: Run, artifact: Artifact, portfolio_name: str, aliases: Iterable[str], entity: str | None = None, project: str | None = None) -> None: ...
    def publish_use_artifact(self, artifact: Artifact) -> None: ...
    def communicate_artifact(self, run: Run, artifact: Artifact, aliases: Iterable[str], history_step: int | None = None, is_user_created: bool = False, use_after_commit: bool = False, finalize: bool = True) -> MessageFuture: ...
    def publish_artifact(self, run: Run, artifact: Artifact, aliases: Iterable[str], is_user_created: bool = False, use_after_commit: bool = False, finalize: bool = True) -> None: ...
    def publish_tbdata(self, log_dir: str, save: bool, root_logdir: str = '') -> None: ...
    def publish_partial_history(self, data: dict, user_step: int, step: int | None = None, flush: bool | None = None, publish_step: bool = True, run: Run | None = None) -> None: ...
    def publish_history(self, data: dict, step: int | None = None, run: Run | None = None, publish_step: bool = True) -> None: ...
    def publish_preempting(self) -> None: ...
    def publish_output(self, name: str, data: str) -> None: ...
    def publish_output_raw(self, name: str, data: str) -> None: ...
    def publish_pause(self) -> None: ...
    def publish_resume(self) -> None: ...
    def publish_alert(self, title: str, text: str, level: str, wait_duration: int) -> None: ...
    def publish_exit(self, exit_code: int | None) -> None: ...
    def publish_keepalive(self) -> None: ...
    def join(self) -> None: ...
    def deliver_run(self, run: Run) -> MailboxHandle: ...
    def deliver_run_start(self, run_pb: pb.RunRecord) -> MailboxHandle: ...
    def deliver_attach(self, attach_id: str) -> MailboxHandle: ...
    def deliver_check_version(self, current_version: str | None = None) -> MailboxHandle: ...
    def deliver_stop_status(self) -> MailboxHandle: ...
    def deliver_network_status(self) -> MailboxHandle: ...
    def deliver_internal_messages(self) -> MailboxHandle: ...
    def deliver_get_summary(self) -> MailboxHandle: ...
    def deliver_get_system_metrics(self) -> MailboxHandle: ...
    def deliver_exit(self, exit_code: int | None) -> MailboxHandle: ...
    def deliver_poll_exit(self) -> MailboxHandle: ...
    def deliver_request_server_info(self) -> MailboxHandle: ...
    def deliver_request_sampled_history(self) -> MailboxHandle: ...
    def deliver_request_run_status(self) -> MailboxHandle: ...
    def deliver_request_job_info(self) -> MailboxHandle: ...
