from .. import utils
from ..base import ConfigBase
from ..training_service import TrainingServiceConfig
from dataclasses import dataclass
from typing import List
from typing_extensions import Literal

__all__ = ['RemoteConfig', 'RemoteMachineConfig']

@dataclass(init=False)
class RemoteMachineConfig(ConfigBase):
    host: str
    port: int = ...
    user: str
    password: str | None = ...
    ssh_key_file: utils.PathLike | None = ...
    ssh_passphrase: str | None = ...
    use_active_gpu: bool = ...
    max_trial_number_per_gpu: int = ...
    gpu_indices: List[int] | int | str | None = ...
    python_path: str | None = ...

@dataclass(init=False)
class RemoteConfig(TrainingServiceConfig):
    platform: Literal['remote'] = ...
    machine_list: List[RemoteMachineConfig]
    reuse_mode: bool = ...
