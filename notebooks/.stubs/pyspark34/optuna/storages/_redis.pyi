from optuna import distributions as distributions, exceptions as exceptions
from optuna._experimental import experimental as experimental
from optuna._imports import try_import as try_import
from optuna._study_direction import StudyDirection as StudyDirection
from optuna._study_summary import StudySummary as StudySummary
from optuna.storages import BaseStorage as BaseStorage
from optuna.storages._base import DEFAULT_STUDY_NAME_PREFIX as DEFAULT_STUDY_NAME_PREFIX
from optuna.trial import FrozenTrial as FrozenTrial, TrialState as TrialState
from typing import Any, Dict, List, Sequence, Tuple

class RedisStorage(BaseStorage):
    '''Storage class for Redis backend.

    Note that library users can instantiate this class, but the attributes
    provided by this class are not supposed to be directly accessed by them.

    Example:

        We create an :class:`~optuna.storages.RedisStorage` instance using
        the given redis database URL.

        .. code::

            import optuna


            def objective(trial):
                ...


            storage = optuna.storages.RedisStorage(
                url="redis://passwd@localhost:port/db",
            )

            study = optuna.create_study(storage=storage)
            study.optimize(objective)

    Args:
        url: URL of the redis storage, password and db are optional. (ie: redis://localhost:6379)

    .. note::
        If you use plan to use Redis as a storage mechanism for optuna,
        make sure Redis in installed and running.
        Please execute ``$ pip install -U redis`` to install redis python library.
    '''
    def __init__(self, url: str) -> None: ...
    def create_new_study(self, study_name: str | None = None) -> int: ...
    def delete_study(self, study_id: int) -> None: ...
    def set_study_directions(self, study_id: int, directions: Sequence[StudyDirection]) -> None: ...
    def set_study_user_attr(self, study_id: int, key: str, value: Any) -> None: ...
    def set_study_system_attr(self, study_id: int, key: str, value: Any) -> None: ...
    def get_study_id_from_name(self, study_name: str) -> int: ...
    def get_study_id_from_trial_id(self, trial_id: int) -> int: ...
    def get_study_name_from_id(self, study_id: int) -> str: ...
    def get_study_directions(self, study_id: int) -> List[StudyDirection]: ...
    def get_study_user_attrs(self, study_id: int) -> Dict[str, Any]: ...
    def get_study_system_attrs(self, study_id: int) -> Dict[str, Any]: ...
    def get_all_study_summaries(self) -> List[StudySummary]: ...
    def create_new_trial(self, study_id: int, template_trial: FrozenTrial | None = None) -> int: ...
    def set_trial_state(self, trial_id: int, state: TrialState) -> bool: ...
    def set_trial_param(self, trial_id: int, param_name: str, param_value_internal: float, distribution: distributions.BaseDistribution) -> None: ...
    def get_trial_id_from_study_id_trial_number(self, study_id: int, trial_number: int) -> int: ...
    def get_trial_number_from_id(self, trial_id: int) -> int: ...
    def get_best_trial(self, study_id: int) -> FrozenTrial: ...
    def get_trial_param(self, trial_id: int, param_name: str) -> float: ...
    def set_trial_values(self, trial_id: int, values: Sequence[float]) -> None: ...
    def set_trial_intermediate_value(self, trial_id: int, step: int, intermediate_value: float) -> None: ...
    def set_trial_user_attr(self, trial_id: int, key: str, value: Any) -> None: ...
    def set_trial_system_attr(self, trial_id: int, key: str, value: Any) -> None: ...
    def get_trial(self, trial_id: int) -> FrozenTrial: ...
    def get_all_trials(self, study_id: int, deepcopy: bool = True, states: Tuple[TrialState, ...] | None = None) -> List[FrozenTrial]: ...
    def read_trials_from_remote_storage(self, study_id: int) -> None: ...
