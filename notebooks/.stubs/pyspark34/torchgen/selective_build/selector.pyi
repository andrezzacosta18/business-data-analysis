from dataclasses import dataclass
from torchgen.model import NativeFunction as NativeFunction
from torchgen.selective_build.operator import SelectiveBuildOperator as SelectiveBuildOperator, merge_debug_info as merge_debug_info, merge_operator_dicts as merge_operator_dicts, strip_operator_overload_name as strip_operator_overload_name
from typing import Dict, List, Set

@dataclass(frozen=True)
class SelectiveBuilder:
    include_all_operators: bool
    operators: Dict[str, SelectiveBuildOperator]
    kernel_metadata: Dict[str, List[str]]
    custom_classes: Set[str]
    build_features: Set[str]
    include_all_non_op_selectives: bool
    @staticmethod
    def get_nop_selector() -> SelectiveBuilder: ...
    @staticmethod
    def from_yaml_dict(data: Dict[str, object]) -> SelectiveBuilder: ...
    @staticmethod
    def from_yaml_str(config_contents: str) -> SelectiveBuilder: ...
    @staticmethod
    def from_yaml_path(config_path: str) -> SelectiveBuilder: ...
    @staticmethod
    def from_legacy_op_registration_allow_list(allow_list: Set[str], is_root_operator: bool, is_used_for_training: bool) -> SelectiveBuilder: ...
    def is_operator_selected(self, name: str) -> bool: ...
    def is_native_function_selected(self, func: NativeFunction) -> bool: ...
    def is_operator_selected_for_training(self, name: str) -> bool: ...
    def is_native_function_selected_for_training(self, func: NativeFunction) -> bool: ...
    def is_root_operator(self, name: str) -> bool: ...
    def is_kernel_dtype_selected(self, kernel_tag: str, dtype: str) -> bool: ...
    def to_dict(self) -> Dict[str, object]: ...
    def __init__(self, include_all_operators, _debug_info, operators, kernel_metadata, custom_classes, build_features, include_all_non_op_selectives) -> None: ...

def merge_kernel_metadata(lhs: Dict[str, List[str]], rhs: Dict[str, List[str]]) -> Dict[str, List[str]]: ...
def combine_selective_builders(lhs: SelectiveBuilder, rhs: SelectiveBuilder) -> SelectiveBuilder: ...
def op_name_from_native_function(f: NativeFunction) -> str: ...
