import dataclasses
import enum
from . import utils as utils
from .bytecode_transformation import create_instruction as create_instruction
from .utils import enum_repr as enum_repr, rename_implicit as rename_implicit
from torch._guards import GuardSource as GuardSource, Source as Source
from typing import Any

def is_constant_source(source): ...
def is_input_source(source): ...

@dataclasses.dataclass
class LocalSource(Source):
    local_name: str
    def reconstruct(self, codegen): ...
    def guard_source(self): ...
    def name(self): ...
    def __init__(self, local_name) -> None: ...

@dataclasses.dataclass
class LocalInputSource(LocalSource):
    pos: int
    def __init__(self, local_name, pos) -> None: ...

@dataclasses.dataclass
class RandomValueSource(Source):
    random_call_index: int
    def guard_source(self): ...
    def reconstruct(self, codegen): ...
    def name(self): ...
    def __init__(self, random_call_index) -> None: ...

@dataclasses.dataclass
class GlobalSource(Source):
    global_name: str
    def reconstruct(self, codegen): ...
    def guard_source(self): ...
    def name(self): ...
    def __init__(self, global_name) -> None: ...

@dataclasses.dataclass
class GlobalWeakRefSource(Source):
    global_name: str
    def reconstruct(self, codegen): ...
    def guard_source(self): ...
    def name(self): ...
    def __init__(self, global_name) -> None: ...

@dataclasses.dataclass
class AttrSource(Source):
    base: Source
    member: str
    def __init__(self, base, member) -> None: ...
    def reconstruct(self, codegen): ...
    def guard_source(self): ...
    def name(self): ...

class TensorProperty(enum.Enum):
    SIZE: int
    STRIDE: int
    STORAGE_OFFSET: int

@dataclasses.dataclass
class TensorPropertySource(Source):
    base: Source
    prop: TensorProperty
    idx: int | None = ...
    def __post_init__(self) -> None: ...
    def reconstruct(self, codegen) -> None: ...
    def guard_source(self): ...
    def name(self): ...
    def __init__(self, base, prop, idx) -> None: ...

@dataclasses.dataclass
class NegateSource(Source):
    base: Source
    def __post_init__(self) -> None: ...
    def reconstruct(self, codegen) -> None: ...
    def guard_source(self): ...
    def name(self): ...
    def __init__(self, base) -> None: ...

@dataclasses.dataclass
class DefaultsSource(Source):
    base: Source
    idx_key: int | str
    is_kw: bool
    field: str
    def __init__(self, base, idx_key, is_kw: bool = False) -> None: ...
    def reconstruct(self, codegen): ...
    def guard_source(self): ...
    def name(self): ...

@dataclasses.dataclass
class GetItemSource(Source):
    base: Source
    index: Any
    def __post_init__(self) -> None: ...
    def reconstruct(self, codegen): ...
    def guard_source(self): ...
    def name(self): ...
    def __init__(self, base, index) -> None: ...

@dataclasses.dataclass
class TupleIteratorGetItemSource(GetItemSource):
    def reconstruct(self, codegen): ...
    def name(self): ...
    def __init__(self, base, index) -> None: ...

@dataclasses.dataclass
class TypeSource(Source):
    base: Source
    def __post_init__(self) -> None: ...
    def reconstruct(self, codegen): ...
    def guard_source(self): ...
    def name(self): ...
    def __init__(self, base) -> None: ...

@dataclasses.dataclass
class SuperSource(Source):
    type: Source
    obj: Source
    def __post_init__(self) -> None: ...
    def reconstruct(self, codegen): ...
    def guard_source(self): ...
    def name(self): ...
    def __init__(self, type, obj) -> None: ...

@dataclasses.dataclass
class ODictGetItemSource(Source):
    base: Source
    index: Any
    def __post_init__(self) -> None: ...
    def reconstruct(self, codegen): ...
    def guard_source(self): ...
    def name(self): ...
    def __init__(self, base, index) -> None: ...

@dataclasses.dataclass
class NNModuleSource(Source):
    inner: Source
    def reconstruct(self, codegen): ...
    def guard_source(self): ...
    def name(self): ...
    def __init__(self, inner) -> None: ...

class NotNNModuleSource(NNModuleSource):
    def guard_source(self): ...

@dataclasses.dataclass
class ConstantSource(Source):
    source_name: str
    def reconstruct(self, codegen): ...
    def guard_source(self): ...
    def name(self): ...
    def make_guard(self, fn, is_volatile: bool = False) -> None: ...
    def __init__(self, source_name) -> None: ...

@dataclasses.dataclass
class ShapeEnvSource(Source):
    def name(self): ...
    def guard_source(self): ...
