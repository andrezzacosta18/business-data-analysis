import os
from _typeshed import Incomplete
from collections.abc import Generator

basestring = str
FileNotFoundError = OSError
PACKAGE_FILES: Incomplete
modification_time = os.path.getmtime
GENERATED_BY_MARKER: Incomplete
GENERATED_BY_MARKER_BYTES: Incomplete

class _TryFinallyGeneratorContextManager:
    """
    Fast, bare minimum @contextmanager, only for try-finally, not for exception handling.
    """
    def __init__(self, gen) -> None: ...
    def __enter__(self): ...
    def __exit__(self, exc_type: type[BaseException] | None, exc_val: BaseException | None, exc_tb: types.TracebackType | None) -> None: ...

def try_finally_contextmanager(gen_func): ...
def clear_function_caches() -> None: ...
def cached_function(f): ...
def clear_method_caches(obj) -> None:
    """Removes every cache found in the object,
    if a corresponding method exists for that cache.
    """
def cached_method(f): ...
def replace_suffix(path, newsuf): ...
def open_new_file(path): ...
def castrate_file(path, st) -> None: ...
def is_cython_generated_file(path, allow_failed: bool = False, if_not_found: bool = True): ...
def file_generated_by_this_cython(path): ...
def file_newer_than(path, time): ...
def safe_makedirs(path) -> None: ...
def copy_file_to_dir_if_newer(sourcefile, destdir) -> None:
    """
    Copy file sourcefile to directory destdir (creating it if needed),
    preserving metadata. If the destination file exists and is not
    older than the source file, the copying is skipped.
    """
def find_root_package_dir(file_path): ...
def check_package_dir(dir_path, package_names): ...
def contains_init(dir_path): ...
def is_package_dir(dir_path): ...
def path_exists(path): ...
def find_versioned_file(directory, filename, suffix, _current_version=...):
    '''
    Search a directory for versioned pxd files, e.g. "lib.cython-30.pxd" for a Cython 3.0+ version.

    @param directory: the directory to search
    @param filename: the filename without suffix
    @param suffix: the filename extension including the dot, e.g. ".pxd"
    @return: the file path if found, or None
    '''
def decode_filename(filename): ...
def detect_opened_file_encoding(f, default: str = 'UTF-8'): ...
def skip_bom(f) -> None:
    """
    Read past a BOM at the beginning of a source file.
    This could be added to the scanner, but it's *substantially* easier
    to keep it at this level.
    """
def open_source_file(source_filename, encoding: Incomplete | None = None, error_handling: Incomplete | None = None): ...
def open_source_from_loader(loader, source_filename, encoding: Incomplete | None = None, error_handling: Incomplete | None = None): ...
def str_to_number(value): ...
def strip_py2_long_suffix(value_str):
    """
    Python 2 likes to append 'L' to stringified numbers
    which in then can't process when converting them to numbers.
    """
def long_literal(value): ...
def get_cython_cache_dir():
    """
    Return the base directory containing Cython's caches.

    Priority:

    1. CYTHON_CACHE_DIR
    2. (OS X): ~/Library/Caches/Cython
       (posix not OS X): XDG_CACHE_HOME/cython if XDG_CACHE_HOME defined
    3. ~/.cython

    """
def captured_fd(stream: int = 2, encoding: Incomplete | None = None) -> Generator[Incomplete, None, Incomplete]: ...
def get_encoding_candidates(): ...
def prepare_captured(captured): ...
def print_captured(captured, output, header_line: Incomplete | None = None) -> None: ...
def print_bytes(s, header_text: Incomplete | None = None, end: bytes = b'\n', file=..., flush: bool = True) -> None: ...

class OrderedSet:
    def __init__(self, elements=()) -> None: ...
    def __iter__(self): ...
    def update(self, elements) -> None: ...
    def add(self, e) -> None: ...
    def __bool__(self) -> bool: ...
    __nonzero__ = __bool__

def add_metaclass(metaclass):
    """Class decorator for creating a class with a metaclass."""
def raise_error_if_module_name_forbidden(full_module_name) -> None: ...
def build_hex_version(version_string):
    """
    Parse and translate public version identifier like '4.3a1' into the readable hex representation '0x040300A1' (like PY_VERSION_HEX).

    SEE: https://peps.python.org/pep-0440/#public-version-identifiers
    """
def write_depfile(target, source, dependencies) -> None: ...
def print_version() -> None: ...
def normalise_float_repr(float_str):
    """
    Generate a 'normalised', simple digits string representation of a float value
    to allow string comparisons.  Examples: '.123', '123.456', '123.'
    """
