import functools
from ..util.sqla_compat import Computed as Computed, Identity as Identity
from .impl import DefaultImpl as DefaultImpl
from _typeshed import Incomplete
from sqlalchemy.schema import Column, DDLElement
from sqlalchemy.sql.compiler import Compiled as Compiled, DDLCompiler as DDLCompiler
from sqlalchemy.sql.elements import TextClause as TextClause, quoted_name
from sqlalchemy.sql.functions import Function as Function
from sqlalchemy.sql.schema import FetchedValue as FetchedValue
from sqlalchemy.sql.type_api import TypeEngine as TypeEngine
from typing import Any

class AlterTable(DDLElement):
    """Represent an ALTER TABLE statement.

    Only the string name and optional schema name of the table
    is required, not a full Table object.

    """
    table_name: Incomplete
    schema: Incomplete
    def __init__(self, table_name: str, schema: quoted_name | str | None = None) -> None: ...

class RenameTable(AlterTable):
    new_table_name: Incomplete
    def __init__(self, old_table_name: str, new_table_name: quoted_name | str, schema: quoted_name | str | None = None) -> None: ...

class AlterColumn(AlterTable):
    column_name: Incomplete
    existing_type: Incomplete
    existing_nullable: Incomplete
    existing_server_default: Incomplete
    existing_comment: Incomplete
    def __init__(self, name: str, column_name: str, schema: str | None = None, existing_type: TypeEngine | None = None, existing_nullable: bool | None = None, existing_server_default: _ServerDefault | None = None, existing_comment: str | None = None) -> None: ...

class ColumnNullable(AlterColumn):
    nullable: Incomplete
    def __init__(self, name: str, column_name: str, nullable: bool, **kw) -> None: ...

class ColumnType(AlterColumn):
    type_: Incomplete
    def __init__(self, name: str, column_name: str, type_: TypeEngine, **kw) -> None: ...

class ColumnName(AlterColumn):
    newname: Incomplete
    def __init__(self, name: str, column_name: str, newname: str, **kw) -> None: ...

class ColumnDefault(AlterColumn):
    default: Incomplete
    def __init__(self, name: str, column_name: str, default: _ServerDefault | None, **kw) -> None: ...

class ComputedColumnDefault(AlterColumn):
    default: Incomplete
    def __init__(self, name: str, column_name: str, default: Computed | None, **kw) -> None: ...

class IdentityColumnDefault(AlterColumn):
    default: Incomplete
    impl: Incomplete
    def __init__(self, name: str, column_name: str, default: Identity | None, impl: DefaultImpl, **kw) -> None: ...

class AddColumn(AlterTable):
    column: Incomplete
    def __init__(self, name: str, column: Column[Any], schema: quoted_name | str | None = None) -> None: ...

class DropColumn(AlterTable):
    column: Incomplete
    def __init__(self, name: str, column: Column[Any], schema: str | None = None) -> None: ...

class ColumnComment(AlterColumn):
    comment: Incomplete
    def __init__(self, name: str, column_name: str, comment: str | None, **kw) -> None: ...

def visit_rename_table(element: RenameTable, compiler: DDLCompiler, **kw) -> str: ...
def visit_add_column(element: AddColumn, compiler: DDLCompiler, **kw) -> str: ...
def visit_drop_column(element: DropColumn, compiler: DDLCompiler, **kw) -> str: ...
def visit_column_nullable(element: ColumnNullable, compiler: DDLCompiler, **kw) -> str: ...
def visit_column_type(element: ColumnType, compiler: DDLCompiler, **kw) -> str: ...
def visit_column_name(element: ColumnName, compiler: DDLCompiler, **kw) -> str: ...
def visit_column_default(element: ColumnDefault, compiler: DDLCompiler, **kw) -> str: ...
def visit_computed_column(element: ComputedColumnDefault, compiler: DDLCompiler, **kw): ...
def visit_identity_column(element: IdentityColumnDefault, compiler: DDLCompiler, **kw): ...
def quote_dotted(name: quoted_name | str, quote: functools.partial) -> quoted_name | str:
    """quote the elements of a dotted name"""
def format_table_name(compiler: Compiled, name: quoted_name | str, schema: quoted_name | str | None) -> quoted_name | str: ...
def format_column_name(compiler: DDLCompiler, name: quoted_name | str | None) -> quoted_name | str: ...
def format_server_default(compiler: DDLCompiler, default: _ServerDefault | None) -> str: ...
def format_type(compiler: DDLCompiler, type_: TypeEngine) -> str: ...
def alter_table(compiler: DDLCompiler, name: str, schema: str | None) -> str: ...
def drop_column(compiler: DDLCompiler, name: str, **kw) -> str: ...
def alter_column(compiler: DDLCompiler, name: str) -> str: ...
def add_column(compiler: DDLCompiler, column: Column[Any], **kw) -> str: ...
