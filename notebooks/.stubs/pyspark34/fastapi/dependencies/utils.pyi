import inspect
from fastapi import params as params
from fastapi._compat import ErrorWrapper as ErrorWrapper, ModelField as ModelField, PYDANTIC_V2 as PYDANTIC_V2, Required as Required, Undefined as Undefined, copy_field_info as copy_field_info, create_body_model as create_body_model, evaluate_forwardref as evaluate_forwardref, field_annotation_is_scalar as field_annotation_is_scalar, get_annotation_from_field_info as get_annotation_from_field_info, get_missing_field_error as get_missing_field_error, is_bytes_field as is_bytes_field, is_bytes_sequence_field as is_bytes_sequence_field, is_scalar_field as is_scalar_field, is_scalar_sequence_field as is_scalar_sequence_field, is_sequence_field as is_sequence_field, is_uploadfile_or_nonable_uploadfile_annotation as is_uploadfile_or_nonable_uploadfile_annotation, is_uploadfile_sequence_annotation as is_uploadfile_sequence_annotation, lenient_issubclass as lenient_issubclass, sequence_types as sequence_types, serialize_sequence_value as serialize_sequence_value, value_is_sequence as value_is_sequence
from fastapi.concurrency import AsyncExitStack as AsyncExitStack, asynccontextmanager as asynccontextmanager, contextmanager_in_threadpool as contextmanager_in_threadpool
from fastapi.dependencies.models import Dependant as Dependant, SecurityRequirement as SecurityRequirement
from fastapi.logger import logger as logger
from fastapi.security.base import SecurityBase as SecurityBase
from fastapi.security.oauth2 import OAuth2 as OAuth2, SecurityScopes as SecurityScopes
from fastapi.security.open_id_connect_url import OpenIdConnect as OpenIdConnect
from fastapi.utils import create_response_field as create_response_field, get_path_param_names as get_path_param_names
from starlette.background import BackgroundTasks
from starlette.datastructures import FormData, Headers, QueryParams
from starlette.requests import Request
from starlette.responses import Response
from starlette.websockets import WebSocket
from typing import Any, Callable, Dict, List, Mapping, Sequence, Tuple

multipart_not_installed_error: str
multipart_incorrect_install_error: str

def check_file_field(field: ModelField) -> None: ...
def get_param_sub_dependant(*, param_name: str, depends: params.Depends, path: str, security_scopes: List[str] | None = None) -> Dependant: ...
def get_parameterless_sub_dependant(*, depends: params.Depends, path: str) -> Dependant: ...
def get_sub_dependant(*, depends: params.Depends, dependency: Callable[..., Any], path: str, name: str | None = None, security_scopes: List[str] | None = None) -> Dependant: ...
CacheKey = Tuple[Callable[..., Any] | None, Tuple[str, ...]]

def get_flat_dependant(dependant: Dependant, *, skip_repeats: bool = False, visited: List[CacheKey] | None = None) -> Dependant: ...
def get_flat_params(dependant: Dependant) -> List[ModelField]: ...
def get_typed_signature(call: Callable[..., Any]) -> inspect.Signature: ...
def get_typed_annotation(annotation: Any, globalns: Dict[str, Any]) -> Any: ...
def get_typed_return_annotation(call: Callable[..., Any]) -> Any: ...
def get_dependant(*, path: str, call: Callable[..., Any], name: str | None = None, security_scopes: List[str] | None = None, use_cache: bool = True) -> Dependant: ...
def add_non_field_param_to_dependency(*, param_name: str, type_annotation: Any, dependant: Dependant) -> bool | None: ...
def analyze_param(*, param_name: str, annotation: Any, value: Any, is_path_param: bool) -> Tuple[Any, params.Depends | None, ModelField | None]: ...
def is_body_param(*, param_field: ModelField, is_path_param: bool) -> bool: ...
def add_param_to_fields(*, field: ModelField, dependant: Dependant) -> None: ...
def is_coroutine_callable(call: Callable[..., Any]) -> bool: ...
def is_async_gen_callable(call: Callable[..., Any]) -> bool: ...
def is_gen_callable(call: Callable[..., Any]) -> bool: ...
async def solve_generator(*, call: Callable[..., Any], stack: AsyncExitStack, sub_values: Dict[str, Any]) -> Any: ...
async def solve_dependencies(*, request: Request | WebSocket, dependant: Dependant, body: Dict[str, Any] | FormData | None = None, background_tasks: BackgroundTasks | None = None, response: Response | None = None, dependency_overrides_provider: Any | None = None, dependency_cache: Dict[Tuple[Callable[..., Any], Tuple[str]], Any] | None = None) -> Tuple[Dict[str, Any], List[Any], BackgroundTasks | None, Response, Dict[Tuple[Callable[..., Any], Tuple[str]], Any]]: ...
def request_params_to_args(required_params: Sequence[ModelField], received_params: Mapping[str, Any] | QueryParams | Headers) -> Tuple[Dict[str, Any], List[Any]]: ...
async def request_body_to_args(required_params: List[ModelField], received_body: Dict[str, Any] | FormData | None) -> Tuple[Dict[str, Any], List[Dict[str, Any]]]: ...
def get_body_field(*, dependant: Dependant, name: str) -> ModelField | None: ...
