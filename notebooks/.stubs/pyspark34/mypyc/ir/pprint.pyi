from _typeshed import Incomplete
from mypyc.common import short_name as short_name
from mypyc.ir.func_ir import FuncIR as FuncIR, all_values_full as all_values_full
from mypyc.ir.module_ir import ModuleIRs as ModuleIRs
from mypyc.ir.ops import Assign as Assign, AssignMulti as AssignMulti, BasicBlock as BasicBlock, Box as Box, Branch as Branch, Call as Call, CallC as CallC, Cast as Cast, ComparisonOp as ComparisonOp, ControlOp as ControlOp, DecRef as DecRef, ERR_NEVER as ERR_NEVER, Extend as Extend, Float as Float, FloatComparisonOp as FloatComparisonOp, FloatNeg as FloatNeg, FloatOp as FloatOp, GetAttr as GetAttr, GetElementPtr as GetElementPtr, Goto as Goto, IncRef as IncRef, InitStatic as InitStatic, IntOp as IntOp, Integer as Integer, KeepAlive as KeepAlive, LoadAddress as LoadAddress, LoadErrorValue as LoadErrorValue, LoadGlobal as LoadGlobal, LoadLiteral as LoadLiteral, LoadMem as LoadMem, LoadStatic as LoadStatic, MethodCall as MethodCall, Op as Op, OpVisitor as OpVisitor, RaiseStandardError as RaiseStandardError, Register as Register, Return as Return, SetAttr as SetAttr, SetMem as SetMem, Truncate as Truncate, TupleGet as TupleGet, TupleSet as TupleSet, Unborrow as Unborrow, Unbox as Unbox, Unreachable as Unreachable, Value as Value
from mypyc.ir.rtypes import RType as RType, is_bool_rprimitive as is_bool_rprimitive, is_int_rprimitive as is_int_rprimitive
from typing import Any, Final, Sequence

ErrorSource = BasicBlock | Op

class IRPrettyPrintVisitor(OpVisitor[str]):
    """Internal visitor that pretty-prints ops."""
    names: Incomplete
    def __init__(self, names: dict[Value, str]) -> None: ...
    def visit_goto(self, op: Goto) -> str: ...
    branch_op_names: Final[Incomplete]
    def visit_branch(self, op: Branch) -> str: ...
    def visit_return(self, op: Return) -> str: ...
    def visit_unreachable(self, op: Unreachable) -> str: ...
    def visit_assign(self, op: Assign) -> str: ...
    def visit_assign_multi(self, op: AssignMulti) -> str: ...
    def visit_load_error_value(self, op: LoadErrorValue) -> str: ...
    def visit_load_literal(self, op: LoadLiteral) -> str: ...
    def visit_get_attr(self, op: GetAttr) -> str: ...
    def borrow_prefix(self, op: Op) -> str: ...
    def visit_set_attr(self, op: SetAttr) -> str: ...
    def visit_load_static(self, op: LoadStatic) -> str: ...
    def visit_init_static(self, op: InitStatic) -> str: ...
    def visit_tuple_get(self, op: TupleGet) -> str: ...
    def visit_tuple_set(self, op: TupleSet) -> str: ...
    def visit_inc_ref(self, op: IncRef) -> str: ...
    def visit_dec_ref(self, op: DecRef) -> str: ...
    def visit_call(self, op: Call) -> str: ...
    def visit_method_call(self, op: MethodCall) -> str: ...
    def visit_cast(self, op: Cast) -> str: ...
    def visit_box(self, op: Box) -> str: ...
    def visit_unbox(self, op: Unbox) -> str: ...
    def visit_raise_standard_error(self, op: RaiseStandardError) -> str: ...
    def visit_call_c(self, op: CallC) -> str: ...
    def visit_truncate(self, op: Truncate) -> str: ...
    def visit_extend(self, op: Extend) -> str: ...
    def visit_load_global(self, op: LoadGlobal) -> str: ...
    def visit_int_op(self, op: IntOp) -> str: ...
    def visit_comparison_op(self, op: ComparisonOp) -> str: ...
    def visit_float_op(self, op: FloatOp) -> str: ...
    def visit_float_neg(self, op: FloatNeg) -> str: ...
    def visit_float_comparison_op(self, op: FloatComparisonOp) -> str: ...
    def visit_load_mem(self, op: LoadMem) -> str: ...
    def visit_set_mem(self, op: SetMem) -> str: ...
    def visit_get_element_ptr(self, op: GetElementPtr) -> str: ...
    def visit_load_address(self, op: LoadAddress) -> str: ...
    def visit_keep_alive(self, op: KeepAlive) -> str: ...
    def visit_unborrow(self, op: Unborrow) -> str: ...
    def format(self, fmt: str, *args: Any) -> str:
        """Helper for formatting strings.

        These format sequences are supported in fmt:

          %s: arbitrary object converted to string using str()
          %r: name of IR value/register
          %d: int
          %f: float
          %l: BasicBlock (formatted as label 'Ln')
          %t: RType
        """

def format_registers(func_ir: FuncIR, names: dict[Value, str]) -> list[str]: ...
def format_blocks(blocks: list[BasicBlock], names: dict[Value, str], source_to_error: dict[ErrorSource, list[str]]) -> list[str]:
    """Format a list of IR basic blocks into a human-readable form."""
def format_func(fn: FuncIR, errors: Sequence[tuple[ErrorSource, str]] = ()) -> list[str]: ...
def format_modules(modules: ModuleIRs) -> list[str]: ...
def generate_names_for_ir(args: list[Register], blocks: list[BasicBlock]) -> dict[Value, str]:
    """Generate unique names for IR values.

    Give names such as 'r5' to temp values in IR which are useful when
    pretty-printing or generating C. Ensure generated names are unique.
    """
