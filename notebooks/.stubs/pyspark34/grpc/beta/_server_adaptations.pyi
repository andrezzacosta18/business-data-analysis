import grpc
from _typeshed import Incomplete
from grpc.beta import interfaces as interfaces
from grpc.framework.common import cardinality as cardinality, style as style
from grpc.framework.foundation import abandonment as abandonment, logging_pool as logging_pool, stream as stream
from grpc.framework.interfaces.face import face as face
from typing import NamedTuple

class _ServerProtocolContext(interfaces.GRPCServicerContext):
    def __init__(self, servicer_context) -> None: ...
    def peer(self): ...
    def disable_next_response_compression(self) -> None: ...

class _FaceServicerContext(face.ServicerContext):
    def __init__(self, servicer_context) -> None: ...
    def is_active(self): ...
    def time_remaining(self): ...
    def add_abortion_callback(self, abortion_callback) -> None: ...
    def cancel(self) -> None: ...
    def protocol_context(self): ...
    def invocation_metadata(self): ...
    def initial_metadata(self, initial_metadata) -> None: ...
    def terminal_metadata(self, terminal_metadata) -> None: ...
    def code(self, code) -> None: ...
    def details(self, details) -> None: ...

class _Callback(stream.Consumer):
    def __init__(self) -> None: ...
    def consume(self, value) -> None: ...
    def terminate(self) -> None: ...
    def consume_and_terminate(self, value) -> None: ...
    def cancel(self) -> None: ...
    def draw_one_value(self): ...
    def draw_all_values(self): ...

class _SimpleMethodHandler(NamedTuple('_MethodHandler', [('request_streaming', Incomplete), ('response_streaming', Incomplete), ('request_deserializer', Incomplete), ('response_serializer', Incomplete), ('unary_unary', Incomplete), ('unary_stream', Incomplete), ('stream_unary', Incomplete), ('stream_stream', Incomplete)]), grpc.RpcMethodHandler): ...

class _GenericRpcHandler(grpc.GenericRpcHandler):
    def __init__(self, method_implementations, multi_method_implementation, request_deserializers, response_serializers) -> None: ...
    def service(self, handler_call_details): ...

class _Server(interfaces.Server):
    def __init__(self, grpc_server) -> None: ...
    def add_insecure_port(self, address): ...
    def add_secure_port(self, address, server_credentials): ...
    def start(self) -> None: ...
    def stop(self, grace): ...
    def __enter__(self): ...
    def __exit__(self, exc_type: type[BaseException] | None, exc_val: BaseException | None, exc_tb: types.TracebackType | None): ...

def server(service_implementations, multi_method_implementation, request_deserializers, response_serializers, thread_pool, thread_pool_size): ...
