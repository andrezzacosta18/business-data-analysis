import grpc
import types
from ._typing import DeserializingFunction as DeserializingFunction, DoneCallbackType as DoneCallbackType, MetadataType as MetadataType, RequestIterableType as RequestIterableType, SerializingFunction as SerializingFunction
from _typeshed import Incomplete
from typing import Any, Callable, NamedTuple, Sequence, Tuple

class _ServicePipeline:
    interceptors: Tuple[grpc.ServerInterceptor]
    def __init__(self, interceptors: Sequence[grpc.ServerInterceptor]) -> None: ...
    def execute(self, thunk: Callable, context: grpc.HandlerCallDetails) -> grpc.RpcMethodHandler: ...

def service_pipeline(interceptors: Sequence[grpc.ServerInterceptor] | None) -> _ServicePipeline | None: ...

class _ClientCallDetails(NamedTuple('_ClientCallDetails', [('method', Incomplete), ('timeout', Incomplete), ('metadata', Incomplete), ('credentials', Incomplete), ('wait_for_ready', Incomplete), ('compression', Incomplete)]), grpc.ClientCallDetails): ...

class _FailureOutcome(grpc.RpcError, grpc.Future, grpc.Call):
    def __init__(self, exception: Exception, traceback: types.TracebackType) -> None: ...
    def initial_metadata(self) -> MetadataType | None: ...
    def trailing_metadata(self) -> MetadataType | None: ...
    def code(self) -> grpc.StatusCode | None: ...
    def details(self) -> str | None: ...
    def cancel(self) -> bool: ...
    def cancelled(self) -> bool: ...
    def is_active(self) -> bool: ...
    def time_remaining(self) -> float | None: ...
    def running(self) -> bool: ...
    def done(self) -> bool: ...
    def result(self, ignored_timeout: float | None = None): ...
    def exception(self, ignored_timeout: float | None = None) -> Exception | None: ...
    def traceback(self, ignored_timeout: float | None = None) -> types.TracebackType | None: ...
    def add_callback(self, unused_callback) -> bool: ...
    def add_done_callback(self, fn: DoneCallbackType) -> None: ...
    def __iter__(self): ...
    def __next__(self) -> None: ...
    def next(self): ...

class _UnaryOutcome(grpc.Call, grpc.Future):
    def __init__(self, response: Any, call: grpc.Call) -> None: ...
    def initial_metadata(self) -> MetadataType | None: ...
    def trailing_metadata(self) -> MetadataType | None: ...
    def code(self) -> grpc.StatusCode | None: ...
    def details(self) -> str | None: ...
    def is_active(self) -> bool: ...
    def time_remaining(self) -> float | None: ...
    def cancel(self) -> bool: ...
    def add_callback(self, callback) -> bool: ...
    def cancelled(self) -> bool: ...
    def running(self) -> bool: ...
    def done(self) -> bool: ...
    def result(self, ignored_timeout: float | None = None): ...
    def exception(self, ignored_timeout: float | None = None): ...
    def traceback(self, ignored_timeout: float | None = None): ...
    def add_done_callback(self, fn: DoneCallbackType) -> None: ...

class _UnaryUnaryMultiCallable(grpc.UnaryUnaryMultiCallable):
    def __init__(self, thunk: Callable, method: str, interceptor: grpc.UnaryUnaryClientInterceptor) -> None: ...
    def __call__(self, request: Any, timeout: float | None = None, metadata: MetadataType | None = None, credentials: grpc.CallCredentials | None = None, wait_for_ready: bool | None = None, compression: grpc.Compression | None = None) -> Any: ...
    def with_call(self, request: Any, timeout: float | None = None, metadata: MetadataType | None = None, credentials: grpc.CallCredentials | None = None, wait_for_ready: bool | None = None, compression: grpc.Compression | None = None) -> Tuple[Any, grpc.Call]: ...
    def future(self, request: Any, timeout: float | None = None, metadata: MetadataType | None = None, credentials: grpc.CallCredentials | None = None, wait_for_ready: bool | None = None, compression: grpc.Compression | None = None) -> Any: ...

class _UnaryStreamMultiCallable(grpc.UnaryStreamMultiCallable):
    def __init__(self, thunk: Callable, method: str, interceptor: grpc.UnaryStreamClientInterceptor) -> None: ...
    def __call__(self, request: Any, timeout: float | None = None, metadata: MetadataType | None = None, credentials: grpc.CallCredentials | None = None, wait_for_ready: bool | None = None, compression: grpc.Compression | None = None): ...

class _StreamUnaryMultiCallable(grpc.StreamUnaryMultiCallable):
    def __init__(self, thunk: Callable, method: str, interceptor: grpc.StreamUnaryClientInterceptor) -> None: ...
    def __call__(self, request_iterator: RequestIterableType, timeout: float | None = None, metadata: MetadataType | None = None, credentials: grpc.CallCredentials | None = None, wait_for_ready: bool | None = None, compression: grpc.Compression | None = None) -> Any: ...
    def with_call(self, request_iterator: RequestIterableType, timeout: float | None = None, metadata: MetadataType | None = None, credentials: grpc.CallCredentials | None = None, wait_for_ready: bool | None = None, compression: grpc.Compression | None = None) -> Tuple[Any, grpc.Call]: ...
    def future(self, request_iterator: RequestIterableType, timeout: float | None = None, metadata: MetadataType | None = None, credentials: grpc.CallCredentials | None = None, wait_for_ready: bool | None = None, compression: grpc.Compression | None = None) -> Any: ...

class _StreamStreamMultiCallable(grpc.StreamStreamMultiCallable):
    def __init__(self, thunk: Callable, method: str, interceptor: grpc.StreamStreamClientInterceptor) -> None: ...
    def __call__(self, request_iterator: RequestIterableType, timeout: float | None = None, metadata: MetadataType | None = None, credentials: grpc.CallCredentials | None = None, wait_for_ready: bool | None = None, compression: grpc.Compression | None = None): ...

class _Channel(grpc.Channel):
    def __init__(self, channel: grpc.Channel, interceptor: grpc.UnaryUnaryClientInterceptor | grpc.UnaryStreamClientInterceptor | grpc.StreamStreamClientInterceptor | grpc.StreamUnaryClientInterceptor) -> None: ...
    def subscribe(self, callback: Callable, try_to_connect: bool | None = False): ...
    def unsubscribe(self, callback: Callable): ...
    def unary_unary(self, method: str, request_serializer: SerializingFunction | None = None, response_deserializer: DeserializingFunction | None = None) -> grpc.UnaryUnaryMultiCallable: ...
    def unary_stream(self, method: str, request_serializer: SerializingFunction | None = None, response_deserializer: DeserializingFunction | None = None) -> grpc.UnaryStreamMultiCallable: ...
    def stream_unary(self, method: str, request_serializer: SerializingFunction | None = None, response_deserializer: DeserializingFunction | None = None) -> grpc.StreamUnaryMultiCallable: ...
    def stream_stream(self, method: str, request_serializer: SerializingFunction | None = None, response_deserializer: DeserializingFunction | None = None) -> grpc.StreamStreamMultiCallable: ...
    def __enter__(self): ...
    def __exit__(self, exc_type: type[BaseException] | None, exc_val: BaseException | None, exc_tb: types.TracebackType | None): ...
    def close(self) -> None: ...

def intercept_channel(channel: grpc.Channel, *interceptors: Sequence[grpc.UnaryUnaryClientInterceptor | grpc.UnaryStreamClientInterceptor | grpc.StreamStreamClientInterceptor | grpc.StreamUnaryClientInterceptor] | None) -> grpc.Channel: ...
