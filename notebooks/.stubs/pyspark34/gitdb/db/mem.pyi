from gitdb.db.base import ObjectDBR, ObjectDBW

__all__ = ['MemoryDB']

class MemoryDB(ObjectDBR, ObjectDBW):
    """A memory database stores everything to memory, providing fast IO and object
    retrieval. It should be used to buffer results and obtain SHAs before writing
    it to the actual physical storage, as it allows to query whether object already
    exists in the target storage before introducing actual IO"""
    def __init__(self) -> None: ...
    def set_ostream(self, stream) -> None: ...
    def store(self, istream): ...
    def has_object(self, sha): ...
    def info(self, sha): ...
    def stream(self, sha): ...
    def size(self): ...
    def sha_iter(self): ...
    def stream_copy(self, sha_iter, odb):
        """Copy the streams as identified by sha's yielded by sha_iter into the given odb
        The streams will be copied directly
        **Note:** the object will only be written if it did not exist in the target db

        :return: amount of streams actually copied into odb. If smaller than the amount
            of input shas, one or more objects did already exist in odb"""
