from _typeshed import Incomplete
from sentry_sdk._compat import PY2 as PY2, text_type as text_type
from sentry_sdk._types import Event as Event, EventDataCategory as EventDataCategory, TYPE_CHECKING as TYPE_CHECKING
from sentry_sdk.session import Session as Session
from sentry_sdk.utils import capture_internal_exceptions as capture_internal_exceptions, json_dumps as json_dumps
from typing import Any, Dict, Iterator, List

def parse_json(data: bytes | text_type) -> Any: ...

class Envelope:
    headers: Incomplete
    items: Incomplete
    def __init__(self, headers: Dict[str, Any] | None = None, items: List[Item] | None = None) -> None: ...
    @property
    def description(self) -> str: ...
    def add_event(self, event: Event) -> None: ...
    def add_transaction(self, transaction: Event) -> None: ...
    def add_profile(self, profile: Any) -> None: ...
    def add_checkin(self, checkin: Any) -> None: ...
    def add_session(self, session: Session | Any) -> None: ...
    def add_sessions(self, sessions: Any) -> None: ...
    def add_item(self, item: Item) -> None: ...
    def get_event(self) -> Event | None: ...
    def get_transaction_event(self) -> Event | None: ...
    def __iter__(self) -> Iterator[Item]: ...
    def serialize_into(self, f: Any) -> None: ...
    def serialize(self) -> bytes: ...
    @classmethod
    def deserialize_from(cls, f: Any) -> Envelope: ...
    @classmethod
    def deserialize(cls, bytes: bytes) -> Envelope: ...

class PayloadRef:
    json: Incomplete
    bytes: Incomplete
    path: Incomplete
    def __init__(self, bytes: bytes | None = None, path: bytes | text_type | None = None, json: Any | None = None) -> None: ...
    def get_bytes(self) -> bytes: ...
    @property
    def inferred_content_type(self) -> str: ...

class Item:
    headers: Incomplete
    payload: Incomplete
    def __init__(self, payload: bytes | text_type | PayloadRef, headers: Dict[str, Any] | None = None, type: str | None = None, content_type: str | None = None, filename: str | None = None) -> None: ...
    @property
    def type(self) -> str | None: ...
    @property
    def data_category(self) -> EventDataCategory: ...
    def get_bytes(self) -> bytes: ...
    def get_event(self) -> Event | None:
        """
        Returns an error event if there is one.
        """
    def get_transaction_event(self) -> Event | None: ...
    def serialize_into(self, f: Any) -> None: ...
    def serialize(self) -> bytes: ...
    @classmethod
    def deserialize_from(cls, f: Any) -> Item | None: ...
    @classmethod
    def deserialize(cls, bytes: bytes) -> Item | None: ...
