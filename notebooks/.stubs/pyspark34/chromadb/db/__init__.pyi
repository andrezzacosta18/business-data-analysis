import abc
from abc import abstractmethod
from chromadb.api.types import Documents as Documents, Embeddings as Embeddings, IDs as IDs, Metadata as Metadata, Metadatas as Metadatas, Where as Where, WhereDocument as WhereDocument
from chromadb.config import Component as Component
from typing import List, Sequence, Tuple
from uuid import UUID

class DB(Component, metaclass=abc.ABCMeta):
    @abstractmethod
    def create_collection(self, name: str, metadata: Metadata | None = None, get_or_create: bool = False) -> Sequence: ...
    @abstractmethod
    def get_collection(self, name: str) -> Sequence: ...
    @abstractmethod
    def list_collections(self) -> Sequence: ...
    @abstractmethod
    def update_collection(self, id: UUID, new_name: str | None = None, new_metadata: Metadata | None = None) -> None: ...
    @abstractmethod
    def delete_collection(self, name: str) -> None: ...
    @abstractmethod
    def get_collection_uuid_from_name(self, collection_name: str) -> UUID: ...
    @abstractmethod
    def add(self, collection_uuid: UUID, embeddings: Embeddings, metadatas: Metadatas | None, documents: Documents | None, ids: List[str]) -> List[UUID]: ...
    @abstractmethod
    def get(self, where: Where = {}, collection_name: str | None = None, collection_uuid: UUID | None = None, ids: IDs | None = None, sort: str | None = None, limit: int | None = None, offset: int | None = None, where_document: WhereDocument = {}, columns: List[str] | None = None) -> Sequence: ...
    @abstractmethod
    def update(self, collection_uuid: UUID, ids: IDs, embeddings: Embeddings | None = None, metadatas: Metadatas | None = None, documents: Documents | None = None) -> bool: ...
    @abstractmethod
    def count(self, collection_id: UUID) -> int: ...
    @abstractmethod
    def delete(self, where: Where = {}, collection_uuid: UUID | None = None, ids: IDs | None = None, where_document: WhereDocument = {}) -> List[str]: ...
    @abstractmethod
    def get_nearest_neighbors(self, collection_uuid: UUID, where: Where = {}, embeddings: Embeddings | None = None, n_results: int = 10, where_document: WhereDocument = {}) -> Tuple[List[List[UUID]], List[List[float]]]: ...
    @abstractmethod
    def get_by_ids(self, uuids: List[UUID], columns: List[str] | None = None) -> Sequence: ...
